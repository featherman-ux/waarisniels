---
/** Lightweight homepage toast
 * - Shows once per person (localStorage)
 * - Only on "/" (or "/index.html")
 * - Auto-opens after 2s
 */
const STORAGE_KEY = 'niels.homepopup.v2';
const DELAY_MS = 2000;
---
<div
  id="hp-pop"
  class="fixed inset-x-4 bottom-4 z-[9999] mx-auto max-w-lg
hidden rounded-2xl border bg-white/95 p-4 shadow-2xl
backdrop-blur dark:border-gray-700 dark:bg-gray-800/95"
  role="dialog" aria-live="polite" aria-modal="false" aria-label="Melding"
>
  <div class="flex items-start gap-3">
    <div class="flex h-9 w-9 shrink-0 items-center justify-center rounded-full
       bg-gradient-to-br from-amber-400 to-pink-500 text-white shadow">
      ✨
    </div>

    <div class="min-w-0 flex-1">
      <h3 class="mb-1 text-base font-bold text-gray-900 dark:text-gray-100">
        Hoi lieve lezer…
      </h3>
      <p class="text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
        Heb de site weer gemold kutzooi, dacht dat ik er was nu.
      </p>

      <div class="mt-3 flex items-center gap-2">
        <a href="/map/" class="rounded-full border border-amber-500 px-3 py-1.5 text-sm font-semibold
 text-amber-700 hover:bg-amber-50 dark:text-amber-300 dark:hover:bg-amber-900/30">
 Bekijk kaart
        </a>
        <button id="hp-ok"
 class="rounded-full bg-gray-900 px-3 py-1.5 text-sm font-semibold text-white
        hover:opacity-90 dark:bg-gray-100 dark:text-gray-900">
 Oké, top!
        </button>
      </div>
    </div>

    <button id="hp-x" type="button" aria-label="Sluiten"
   class="ml-1 inline-flex h-8 w-8 items-center justify-center
 rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-700
 dark:text-gray-400 dark:hover:bg-gray-700/60 dark:hover:text-gray-200">
      ✕
    </button>
  </div>
</div>

<script is:inline>
  (function () {
    try {
      // Alleen op de homepage
      if (location.pathname !== '/' && location.pathname !== '/index.html') return;

      const KEY = 'niels.homepopup.v2';
      if (localStorage.getItem(KEY) === 'shown') return;

      const el = document.getElementById('hp-pop');
      const ok = document.getElementById('hp-ok');
      const x  = document.getElementById('hp-x');
      if (!el || !ok || !x) return;

      const show = () => {
        // markeer als getoond (dus echt maar 1x per persoon)
        localStorage.setItem(KEY, 'shown');
        el.classList.remove('hidden');
        // subtiele animatie (respecteer reduced motion)
        if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
 el.animate(
   [{ opacity: 0, transform: 'translateY(8px)' }, { opacity: 1, transform: 'translateY(0)' }],
   { duration: 150, easing: 'ease-out' }
 );
        }
      };

      const hide = () => {
        el.classList.add('hidden');
      };

      // Auto na korte delay
      window.addEventListener('load', () => setTimeout(show, 2000));

      // Sluitknoppen
      ok.addEventListener('click', hide);
      x.addEventListener('click', hide);
    } catch {}
  })();
</script>