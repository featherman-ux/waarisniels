---
import BaseLayout from './BaseLayout.astro';
import type { CollectionEntry } from 'astro:content';

export interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { title, description, pubDate, image, tags } = post.data;
const { Content } = await post.render();

const dateStr = new Date(pubDate).toLocaleDateString('nl-NL', {
  year: 'numeric', month: 'long', day: 'numeric'
});
---

<BaseLayout title={title} description={description ?? title}>
  <article class="max-w-3xl mx-auto">
    <header class="mb-6">
      <h1 class="text-4xl font-bold text-gray-900 dark:text-gray-100">{title}</h1>
      <p class="text-sm text-gray-500 mt-2">{dateStr}</p>
      {tags && tags.length > 0 && (
        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
          {tags.map((t, i) => i? ` Â· ${t}` : t)}
        </p>
      )}
    </header>

    {image?.url && (
      <figure class="mb-8">
        <img
          src={image.url}
          alt={image?.alt ?? title}
          class="w-full h-auto rounded-lg shadow-md"
          loading="lazy"
          decoding="async"
        />
        {image?.alt && <figcaption class="mt-2 text-sm text-gray-500">{image.alt}</figcaption>}
      </figure>
    )}

    <div class="prose prose-neutral dark:prose-invert max-w-none">
      <Content />
    </div>
  </article>
</BaseLayout>