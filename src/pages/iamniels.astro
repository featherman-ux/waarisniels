---
// src/pages/iamniels.astro
import BaseLayout from '../layouts/BaseLayout.astro';
---
<BaseLayout title="Admin Mode">
  <style>
    .admin-card {
      max-width: 600px;
      margin: 4rem auto;
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .admin-card h1 {
      color: #023047;
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
    }
    .admin-card p {
      color: #475569;
      margin-bottom: 1.5rem;
    }
    .admin-button {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .admin-button.active {
      background-color: #22c55e; /* Groen */
    }
    .admin-button.inactive {
      background-color: #ef4444; /* Rood */
    }
  </style>

  <main class="admin-card">
    <h1>Admin Mode</h1>
    <p>Via deze pagina kun je instellen of jouw bezoeken aan de website moeten worden meegeteld in de analytics.</p>
    <button id="admin-toggle-button" class="admin-button">Status wordt geladen...</button>
  </main>

  <script>
    const button = document.getElementById('admin-toggle-button');
    const storageKey = 'niels_dev_mode';

    function updateButtonState() {
      const isDevMode = localStorage.getItem(storageKey) === 'true';
      if (isDevMode) {
        button.textContent = 'Jouw bezoeken worden NIET meegeteld (Admin Mode AAN)';
        button.classList.add('active');
        button.classList.remove('inactive');
      } else {
        button.textContent = 'Jouw bezoeken worden WEL meegeteld (Admin Mode UIT)';
        button.classList.add('inactive');
        button.classList.remove('active');
      }
    }

    button.addEventListener('click', () => {
      const isCurrentlyDevMode = localStorage.getItem(storageKey) === 'true';
      if (isCurrentlyDevMode) {
        localStorage.removeItem(storageKey);
      } else {
        localStorage.setItem(storageKey, 'true');
      }
      updateButtonState();
    });

    // Initialiseer de knop bij het laden van de pagina
    updateButtonState();
  </script>
</BaseLayout>